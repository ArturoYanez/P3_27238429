<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="utf-8">
 <meta name="viewport" content="width=device-width, initial-scale=1,shrink-to-fit=no" />
 <meta name="description" content="" />
 <meta name="author" content="" />
  <title><%= og.title %></title>
  <meta name="description" content="<%= og.description %>">
  <meta property="og:title" content="<%= og.title %>">
  <meta property="og:description" content="<%= og.description %>">
  <meta property="og:image" content="<%= og.image %>">
 <!-- Favicon-->
 <link rel="icon" type="image/x-icon" href="/icon/ico.png" />
 <!-- Core theme CSS (includes Bootstrap)-->
 <link href="/css/cliente.css" rel="stylesheet" />
 <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.1/socket.io.js"></script>-->
 <script type="text/javascript" src="/javaScript/alert.js"></script>
 <script async src="https://www.googletagmanager.com/gtag/js?id=UA-XXXXXXXXX-X"></script>
<!--Google Analytics-->
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());
  gtag('config', 'UA-XXXXXXXXX-X');
</script>
<!--Schema Markup-->
 <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": "Smarphone",
    "datePublished": "2024-01-26",
    "author": {
      "@type":"Person",
      "name": "Randis Graterol"
    },
    "publisher":{
      "@type": "Organization",
      "name": "Smarphope Solution",
      "logo": {
        "@type": "ImageObject",
        "url": "https://cdn-icons-png.flaticon.com/128/186/186239.png"
      }
    },
    "image": {
      "@type": "ImageObject",
      "url": "https://images.unsplash.com/photo-1563248870-e45d2e6df7ee?auto=format&fit=crop&q=80&w=1275&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",
      "width": "800",
      "height": "600"
    },
    "description": "Telefonos Inteligentes de alta resolución"
  }
  </script>
</head>
<body>
    <!-- Responsive navbar-->
    <nav>
        <a href="/logout" id='aa'><span style='font-size: 4rem;'>GR</span>Tecnologia</a>

        <div id='styleDiv1'>


         <input type="search" placeholder="Buscar" id='buscarPrincipal'> 

         <a href="#scroll"><button onclick="buscarProductos()" id='boton3'>Buscar</button>
         </a>

     </div>
     <!---------------------------------------------------------->
     <div id="na">
        <ul>
            <li><a aria-current="page" href="#productosH2">Productos</a></li>
            <li><a href="#scroll">Busqueda</a></li>
            <li><a href="/logout" style='color:white'>Cerrar</a></li>
        </ul>
    </div>
    <!---------------------------------------------------------->
    
    <!--------------------------------------->
    <div id="na2">

       <ul class="menu-horizontal">

         <a href="/logout" style='color:white;font:2rem "fuenteC";margin-left: 4rem;margin-top:1rem;'>Salir</a>
     </ul>

 </div>
 <!---------------------------------------------------------->


</nav>
<!-- Header - set the background image for the header in the line below-->
<header class="py-5 bg-image-full" style="background-image: url('https://images.unsplash.com/photo-1480694313141-fce5e697ee25?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D')">
    <div class="text-center my-5">
        <img class="img-fluid rounded-circle mb-4" src="/img/telefono.png" alt="..." id='paddingIMG'/>
        <h1>Pagina Principal</h1>
        <p style='color:white'>Oferta del  <span style='font-size:3rem;color:green'>50%  </span> de descuento por la compra de 2 Infinix smart 7</p>
    </div>
</header>
<!-----------------------------------------------------------------> 
  <form class='myform' style="background:rgba(0,0,0,.9);padding:1rem;margin-bottom: 1.5rem">

          <input type="search" name='busquedaCalificacion' class='filtroCalificaciones' placeholder="Ingrese puntuacion" style='height:6vh;width:30%;border-radius:10px;text-align: center;'>

          <input type="submit" value="Ordenar">
          
      </form>
<!-- Content section-->
<section class="py-5">
    <h2 id='productosH2'>Productos</h2>
    <div class="container my-5">
        <div class="row justify-content-center">

    
     
           <button id='botonCuadricula' onClick="cuadricula()"><img src="/icon/menu2.png" style='width:100%;border:none'></button>
            <div id='co'>
                
            </div>
           <!----------------+++++++++++++++++++++---->    
           <div class='product' id='listaDeProductos'>
              
            <% for(let x = 0;x < producto.length;x++){ %>
            
            <div class='productooo producto-item' id='producto-<%= producto[x].producto_id %>'>

               <img src="<%= producto[x].imagen_url %>" class='imagen' id='imagenSelector'>
               <br>

               <div class='NPB'>

                   <div style='display:flex;flex-direction: column;justify-content:center;align-items:center;height:auto'>
                    <p class='ordenar'><strong>Nombre:</strong><%= producto[x].nombre %></p>

                    <p class='ordenar'><strong>Precio: </strong><span style='color:green'><%= producto[x].precio %> $</span></p>
                    </div>

                <div class='comprarDetalles'>

                   <a href="/comprar/<%=producto[x].producto_id%>"><img src="/icon/comprar.png" width="30"></a>

                   <a href="/detalles/<%=producto[x].producto_id%>" style='margin-top:7px;margin-left:8px;color:blue'>Detalles</a>  
                   
                   <div class='contenedorPuntuacion'>

                   <p class="puntuacion" data-producto_id='<%=producto[x].producto_id%>' data-puntuacion='<%=producto[x].puntuacion%>'><% if(producto[x].puntuacion !== null){ %>
                    Puntuación Total: <%=producto[x].puntuacion%>
                   <% }else{%>
                    Sin Puntuación
                   <% } %> 
                   </p>


                   </div>

            

                   <div class='estrellas'>
                     <img src="/icon/estrella.png" width="20" class="estrella" data-valor='1' title="1">
                     
                     <img src="/icon/estrella.png" width="20" class="estrella" data-valor='2' title="2">

                     <img src="/icon/estrella.png" width="20" class="estrella" data-valor='3' title="3">

                     <img src="/icon/estrella.png" width="20" class="estrella" data-valor='4' title="4">

                     <img src="/icon/estrella.png" width="20" class="estrella" data-valor='5' data-producto_id='<%=producto[x].producto_id%>' title="5"> 
                 </div>      
                

             </div>


         </div>

     </div>

     <% } %>
  

     <table class='table'>

        <thead>
            <tr style='border:1px solid black'>

                <th class='column'>Imagen</th>
                <th class='column'>Nombre</th>
                <th class='column'>Codigo</th>
                <th class='column'>Precio</th>
                <th class='column'>Descripcion</th>
                <th class='column'>Color</th>
                <th class='column'>Peso</th>
                <th class='column'>Categoria</th>
                <th class='column'>Opciones</th>
                
            </tr>
        </thead>

        <tbody>
            <%for(let u = 0;u < producto.length;u++){%>
            <tr class='tr' style='border:1px solid black'><!--ul-->
                <!--li-->
                <td class='column'><img src="<%= producto[u].imagen_url %>" style='width:100%;height:17vh'></td>
                <td class='column'><%= producto[u].nombre %></td>
                <td class='column'><%= producto[u].codigo %></td>
                <td class='column'><%= producto[u].precio %></td>
                <td class='column'><%= producto[u].descripcion %></td>
                <td class='column'><%= producto[u].color %></td>
                <td class='column'><%= producto[u].peso %></td>
                <td class='column'><%= producto[u].categoria_id %></td>
                <td style='display:flex;flex-direction:column;justify-content:center;align-items: center;'>
                   <a href="/comprar/<%=producto[u].producto_id%>"><img src="/icon/comprar.png" width="30"></a>
                   <a href="/detalles/<%=producto[u].producto_id%>" style='margin-top:7px;margin-left:8px;color:blue'>Detalles</a>  
               </td>

           </tr> 
           <% } %>
       </tbody>

   </table>

   <%for(let l = 0 ; l < producto.length; l++){%>
   
   <ul class='ULtabla3'>
    <li class='LItabla3'><img src="<%= producto[l].imagen_url %>" style='width:40%;'></li>
    <li class='LItabla3'><span>Nombre: </span><span><%= producto[l].nombre %></span></li>
    <li class='LItabla3'><span>Codigo: </span><span><%= producto[l].codigo %></span> </li>
    <li class='LItabla3'><span>Precio: </span><span><%= producto[l].precio %></span> </li>
    <li class='LItabla3'><span>Descripcion: </span><span><%= producto[l].descripcion %></span></li>
    <li class='LItabla3'><span>Color: </span><span><%= producto[l].color %></span></li>
    <li class='LItabla3'><span>Peso: </span><span><%= producto[l].peso %></span></li>
    <li class='LItabla3'><span>Categoria: </span><span><%= producto[l]. categoria_id %></span></li>
    <li class='LItabla3'>
        <a href="/comprar/<%=producto[l].producto_id%>"><img src="/icon/comprar.png" width="30"></a>
        <a href="/detalles/<%=producto[l].producto_id%>" style='margin-top:7px;margin-left:8px;color:blue'>Detalles</a>  
    </li>
</ul>
<% } %>

</div>
<!----------------+++++++++++++++++++++---->  
</div>
</div>
</section>
<!--------------------------------------------------------->          

<!-- Image element - set the background image for the header in the line below-->
<div class="bg-image-full" style="background-image: url('https://images.unsplash.com/photo-1607027340690-37e80b0f1b31?q=80&w=1073&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D')">
    <!-- Put anything you want here! The spacer below with inline CSS is just for demo purposes!-->
    <div style="height: 20rem"></div>
</div>



<!-- Content section-->
<section class="py-5">
    <div class="container my-5">
        <div class="row justify-content-center">

           <div class="col-lg-6" id='galeriaImagenes'>



              <div class='buscar2'> 
                <h2 id='scroll'>Busqueda</h2>

                <div style='display:flex'>
                   <input type="search" id="searchInputt" placeholder="Buscar Producto"> 

                   <button onClick="buscarProductos2()" id='boton2'>Buscar</button>
               </div>



           </div>
           <br>
           <br>
           <!--88888888888888888888888888888888888888-->
       </div>

   </div>
</div>
</section>

<!--------------------------------------------------------->
<section id='texto'>
    <p>Comodidad a la hora de comprar tus productos , gran variedad de precios y equipos telefonicos , disponibles con solo un click</p>
</section>
<!-- Footer-->
<footer class="py-5 bg-dark">
    <div class="container"><p class="m-0 text-center text-white">Copyright &copy; Your Website 2023</p></div>
</footer>
<script type="text/javascript" src='/JavaScript/filtroCalificaciones.js'></script>
<script src="http://localhost:4000/socket.io/socket.io.js"></script>
<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS-->
<script type="text/javascript" src='/JavaScript/busqueda.js'></script>
<script type="text/javascript" src='/JavaScript/puntuaciones.js'></script>
<script type="text/javascript">
   fetch('/transaction')
   .then(res=>res.json())
   .then(respuesta=>{
    if(respuesta.message !== false){
       console.log(respuesta);
       Swal.fire(`${respuesta.transaction.message} 
        transaction : ${respuesta.transaction.data.transaction_id}
        Reference : ${respuesta.transaction.data.reference}
        Fecha : ${respuesta.transaction.data.date.split('T')[0]}
        Hora : ${respuesta.transaction.data.date.split('T')[1].split('.')[0]}`)

       .then(() =>{
        // Aquí la alerta se ha cerrado
        console.log("Alerta cerrada");
        fetch('/eliminarTransaction')
        .then(res=> res.json())
        .then(respuesta2=>{
            console.log(`Message : ${respuesta2.message}`);
        })
        .catch(error => {
               console.error('*_*/-[Error]-/*_*:', error);
        });
    }); 

       console.log(respuesta.transaction.message,'respuesta del server');  
   }else{
    console.log('No se recibio respuesta of the transaction'); 
}

})
</script>
</body>
</html>
